@page
@model MSBank.Pages.Customer.IndexModel

@{
    ViewData["Title"] = "Customer";
}


<section class="py-5">

    <div class="row">
        <div class="col-lg-12 mb-5">
            <div class="card">
                <div class="card-header">
                    <h3 class="h6 text-uppercase mb-0">SEARCH A CUSTOMER</h3>
                </div>
                <div class="card-body">

                    <h3>Sidan @Model.CurrentPage av @Model.PageCount </h3>
                    <form method="get">

                        <div class="form-row align-items-center">
                            <div class="col-auto">
                                <input asp-for="@Model.Q"  aria-describedby="emailHelp" placeholder="Enter customers name, last name or city">
                            </div>
                            <div class="col-auto">
                                <button type="submit" class="btn btn-primary">Search</button>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>

   
 <div class="table-responsive">
    <table class="table">
    <thead class="thead-dark">
    <tr>
        <th>
            Customer ID
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="Customer ID" asp-route-sortOrder="asc">
                <i class="fa-solid fa fa-angle-up"></i>
            </a>
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="Customer ID" asp-route-sortOrder="desc">
                <i class="fa-solid fa fa-angle-down"></i>
            </a>
        </th>
        <th>
            First Name
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="First Name" asp-route-sortOrder="asc">
                <i class="fa-solid fa fa-angle-up"></i>
            </a>
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="First Name"  asp-route-sortOrder="desc">
                <i class="fa-solid fa fa-angle-down"></i>
            </a>
        </th>
        <th>
            Last Name
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="Last Name" asp-route-sortOrder="asc">
                <i class="fa-solid fa fa-angle-up"></i>
            </a>
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="Last Name"  asp-route-sortOrder="desc">
                <i class="fa-solid fa fa-angle-down"></i>
            </a>
        </th>
        <th>
            Personal Number
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="Personal Number" asp-route-sortOrder="asc">
                <i class="fa-solid fa fa-angle-up"></i>
            </a>
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="Personal Number"  asp-route-sortOrder="desc">
                <i class="fa-solid fa fa-angle-down"></i>
            </a>
        </th>
        <th>
            Street Address
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="Street Address" asp-route-sortOrder="asc">
                <i class="fa-solid fa fa-angle-up"></i>
            </a>
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="Street Address"  asp-route-sortOrder="desc">
                <i class="fa-solid fa fa-angle-down"></i>
            </a>
        </th>
        <th>
            City
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="City" asp-route-sortOrder="asc">
                <i class="fa-solid fa fa-angle-up"></i>
            </a>
            <a asp-page="" asp-route-q="@Model.Q" asp-route-sortColumn="City" asp-route-sortOrder="desc">
                <i class="fa-solid fa fa-angle-down"></i>
            </a>
        </th>
         <th scope="col"></th>
        <th></th>
        </tr>
    </thead>
<tbody>
    @foreach (var customer in Model.Customers)
    {
    <tr>
        <td>
            @customer.CustomerId
        </td>
        <td>
            @customer.Givenname
        </td>
        <td>
            @customer.Surname
        </td>
        <td>
            @customer.NationalId
        </td>
        <td>
            @customer.Streetaddress
        </td>
        <td>
            @customer.City
        </td>
        <td>
            <a asp-page="/Customer/CustomerProfile" asp-route-customerId="@customer.CustomerId" class="btn btn-secondary"> View Customer</a>
        </td>   
    </tr>
    }
     <tr>
        <td>
            
            @if (Model.CurrentPage != 1)
            {
                <a class="btn btn-secondary"
                   asp-page="" asp-route-q="@Model.Q" 
                   asp-route-sortColumn="@Model.SortColumn" asp-route-sortOrder="@Model.SortOrder"
                   asp-route-pageno="@(Model.CurrentPage - 1)">Prev</a>
            }
        </td>
        <td colspan="2">
            @for (int i = 1; i <= Model.PageCount; i++)
            {
                string theClass = "btn-secondary";
                if (i == @Model.CurrentPage)
                {
                    theClass = "btn-primary";
                }

@*                <a class="btn @(Model.CurrentPage == i ? "btn-primary" : "btn-secondary" )"
                   asp-page="/Category" asp-route-searchWord="@Model.SearchWord" asp-route-categoryId="@Model.CategoryId"
                   asp-route-sortColumn="@Model.SortColumn" asp-route-sortOrder="@Model.SortOrder"
                   asp-route-pageno="@i">@i</a>
*@

                <a class="btn @theClass"
                   asp-page="" asp-route-q="@Model.Q" 
                   asp-route-sortColumn="@Model.SortColumn" asp-route-sortOrder="@Model.SortOrder"
                   asp-route-pageno="@i">@i</a>
            }
        </td>
        <td>
            
            
            <a class="btn btn-secondary" asp-page="" asp-route-q="@Model.Q"  asp-route-sortColumn="@Model.SortColumn" asp-route-sortOrder="@Model.SortOrder" asp-route-pageno="@(Model.CurrentPage + 1)">Next</a>

        </td>
    </tr>
</tbody>
</table>
</div>
</section>


